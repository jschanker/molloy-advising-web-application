<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset = "utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<title>DIGICAP | Molloy Advisement Web Application</title>
		
		<!-- Bootstrap -->
		<!--<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">-->
		<link href="bootstrap.min.css" rel="stylesheet">
		
		<!-- CSS -->
		<link type = "text/css" rel = "stylesheet" href = "advisement-styles.css">
		
		<script src = "MultiList.js"></script>
		<script src = "las-requirements.js"></script>
		<script src = "gened-requirements.js"></script>
		<script src = "courses.js"></script>
		<script src = "biology-advice.js"></script>
		<script src = "business-advice.js"></script>
		<script src = "math-advice.js"></script>
		<script src = "majors.js"></script>
		<script src = "input-processor.js"></script>
		<script src = "fall15-course-data.js"></script>
		<script>
			function generateReport()
			{
				/*var courseHistory = document.getElementById('course-history-box').value;
				var semestersToGraduate = document.getElementById('graduation-select').value;
				var firstMajor = document.getElementById('first-major-select').value;
				var secondMajor = document.getElementById('second-major-select').value;
				var minor = document.getElementById('minor-select').value;*/

				var courseInput = {
					courseHistory:document.getElementById('course-history-box').value,
					semestersToGraduate:document.getElementById('graduation-select').value,
					firstMajor:document.getElementById('first-major-select').value,
					secondMajor:document.getElementById('second-major-select').value,
					minor:document.getElementById('minor-select').value
				};

				var responseItems = generateAdvice(courseInput);
				//var responseItems = parseCourseHistory(courseHistory);
				var responseHTML = "<ol>\n";
				for(var i = 0; i < responseItems.length;i++)
				{
					var responseItem = responseItems[i];
					if(responseItem)
						responseHTML += "\t<li>" + responseItem.split("\n").join("<BR>\n") + "</li>\n"; 
						// Nice way to replace all (http://stackoverflow.com/questions/1144783/replacing-all-occurrences-of-a-string-in-javascript)
				}
				responseHTML += "</ol>";
				document.getElementById('suggestion-box').innerHTML = responseHTML;
				//alert(responseHTML);
				//parseCourseHistory(document.getElementById('course-history-box').value);
			}
			function changeTextAndBackgroundColors(textColor, bgColor)
			{
				document.getElementById("mainForm").style.color = textColor;
				document.getElementById("mainForm").style.backgroundColor = bgColor;
			}
			function removeDuplicateMajor()
			{
				if(document.getElementById("first-major-select").value == document.getElementById("second-major-select").value) {
					document.getElementById("second-major-select").options[0].selected = 'selected';
				}
			}
			function addCourseSelections()
			{
				var courses = JSON.parse(getCurrentCourses());
				var coursesByArea = {};
				courses.forEach(function(course) {
					if(!(course.area in coursesByArea)) {
						coursesByArea[course.area] = [course];
					} else {
						coursesByArea[course.area].push(course);
					}
				});

				for(area in coursesByArea) {
					var courseArea = document.createElement("OPTION");
					courseArea.setAttribute("value", area);
					courseArea.text = area;
					document.getElementById("area-1").add(courseArea);
				}

				return coursesByArea;
			}
			function addCourseNumbers()
			{
				var coursesByArea = addCourseSelections();
				for(var opt in document.getElementById("number-1").options) {
					document.getElementById("number-1").remove(0);
				}

				var courseArea = document.getElementById("area-1");
				var area = courseArea.options[courseArea.selectedIndex].value;

				for(course in coursesByArea[area]) {
					var courseNumber = document.createElement("OPTION");
					courseNumber.setAttribute("value", coursesByArea[area][course].number);
					courseNumber.text = coursesByArea[area][course].number;
					document.getElementById("number-1").add(courseNumber);
				}
			}
		</script>
	</head>
	<body onLoad = "addCourseSelections()">
		<div class="container">
			<div class="page-header">
				<h1>DIGICAP 
					<small>
						Molloy Advisement Web Application
					</small>
				</h1>
				<div class = "color-changer-control">
					<span class = "change-color-button" id = "whiteFormButton" onClick = "changeTextAndBackgroundColors('#000000', '#EEEEEE')">&nbsp;&nbsp;&nbsp;&nbsp;</span>
					<span class = "change-color-button" id = "silverFormButton" onClick = "changeTextAndBackgroundColors('#000000', '#CCCCCC')">&nbsp;&nbsp;&nbsp;&nbsp;</span>
					<span class = "change-color-button" id = "lightMaroonFormButton" onClick = "changeTextAndBackgroundColors('#FFFFFF', '#981E32')">&nbsp;&nbsp;&nbsp;&nbsp;</span>
					<span class = "change-color-button" id = "maroonFormButton" onClick = "changeTextAndBackgroundColors('#FFFFFF', '#800000')">&nbsp;&nbsp;&nbsp;&nbsp;</span>
					<!--<span class = "change-color-button">&nbsp;&nbsp;&nbsp;&nbsp;</span>
					<span class = "change-color-button">&nbsp;&nbsp;&nbsp;&nbsp;</span>-->
				</div> 
				<!--<p>-->
					<xsmall>
						<em>Discussion Information Guide for Charting Academic Progress</em>
					</xsmall>
				<!--</p>-->
			</div>
			<form role = "form" id = "mainForm">
				<div class = "row">
					<div class = "col-md-6">
						<div class = "form-group">
							<label for = "first-major-select">
								First Major:
							</label>
							<select name = "first-major" id = "first-major-select" class="form-control" onChange = "removeDuplicateMajor()">
								<!--<option value = "csc">B.A. Computer Science</option>-->
								<option value = "bio">B.S. Biology (Core only - in progress)</option>
								<option value = "bus-mgmt">B.S. Business Management (in progress)</option>
								<option value = "mat">B.A. Mathematics</option>
								<option value = "mat-ed-adult">B.A. Mathematics - Adolescence Education (in progress - math only)</option>
								<!--<option value = "cis">B.S. Computer Information Systems</option>-->
							</select>
						</div>
						<div class = "form-group">
							<label for = "second-major-select">
								Second Major:
							</label>
							<select name = "second-major" id = "second-major-select" class = "form-control" onChange = "removeDuplicateMajor()">
								<!--<option value = "csc">B.A. Computer Science</option>
								<option value = "mat">B.A. Mathematics</option>
								<option value = "cis">B.S. Computer Information Systems</option>-->
								<option value = "none" SELECTED>None</option>
								<option value = "bio">B.S. Biology (Core only - in progress)</option>
								<option value = "bus-mgmt">B.S. Business Management (in progress)</option>
								<option value = "mat">B.A. Mathematics</option>
								<option value = "mat-ed-adult">B.A. Mathematics - Adolescence Education (in progress - math only)</option>
								<!--<option value = "other">Other</option>-->
							</select>
						</div>
						<div class = "form-group">
							<label for = "minor-select">
								Minor:
							</label>
							<select name = "minor" id = "minor-select" class = "form-control">
								<!--<option value = "csc">B.A. Computer Science</option>
							<option value = "mat">B.A. Mathematics</option>
							<option value = "cis">B.S. Computer Information Systems</option>-->
							<option value = "none" SELECTED>None</option>
							<!--<option value = "other">Other</option>-->
							</select>
						</div>									
						<div class = "form-group">
							<label for = "graduation-select">
								Planned Graduation:
							</label>
							<select name = "graduation" id = "graduation-select" class = "form-control">
								<option value = "1">Spring 2015 (Senior)</option>
								<option value = "2">Fall 2015</option>
								<option value = "3">Spring 2016 (Junior)</option>
								<option value = "4">Fall 2016</option>
								<option value = "5">Spring 2017 (Sophmore)</option>
								<option value = "6">Fall 2017</option>
								<option value = "7">Spring 2018 (Freshman)</option>
								<option value = "8">Fall 2018</option>
								<option value = "9">Spring 2019 (Freshman in 5-year)</option>
							</select>
						</div>									
						<div class = "form-group">
							<label for = "course-box">
								Planned Courses:
							</label>
							<!--<textarea DISABLED name = "courses" id = "course-box" class = "form-control">NOT YET IMPLEMENTED</textarea>-->
							<p>
								<select name = "area-1" id = "area-1" onChange = "addCourseNumbers()">
									<option value = "None">AREA</option>
								</select>
								<select name = "number-1" id = "number-1">
									<option value = "None">NUMBER</option>
								</select>
								<select name = "section-1">
									<option value = "None">SECTION</option>
								</select>
								<span id = "start-time">
									START
								</span>
								<span id = "end-time">
									END
								</span>
								<span id = "credits">
									CREDITS
								</span>
								<span id = "professor">
									PROF
								</span>
							</p>
						</div>
						<label for = "suggestion-box">
							Suggestions/Warnings:
						</label>
						<div id = "suggestion-box">
							Information will appear here. 
							<br> 
							<br> 
							Note: If you're using certain older browsers, it may not appear properly.
							<br>
							<!--Information will appear here.<BR>
							Information will appear here.<BR>
							Information will appear here.<BR>
							Information will appear here.<BR>
							Information will appear here.<BR>
							Information will appear here.<BR>
							Information will appear here.<BR>-->
						</div>
					</div>								
					<div class = "col-md-6">
						<p>
							<label for = "course-history-box">
								Course History
							</label> 
							(Select all (Ctrl+A) from Course History on Lions Den, Copy (Ctrl+C), and Paste (Ctrl+V) below):
						</p>
						<textarea class = "form-control" name = "course-history" id = "course-history-box"></textarea>
					</div>
				</div>
				<div class = "row">
					<div class = "form-group">
						<div class = "col-md-6 col-md-offset-3" id = "submitButton">
							<input class = "form-control" type = "button" value = "Get Advice!" onClick = "generateReport()">
						</div>
					</div>
				</div>
			</form>
		</div>
	</body>
</html>
